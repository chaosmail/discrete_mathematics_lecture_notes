%%% EtherPad for Discrete Mathematics VO
%%% http://www.informatik-forum.at/showthread.php?104454-Notes-2013WS-VO_01
%%% Past pads:
%%%     * 2013-10-17: committed by patrikf
%%%     * 2013-10-18: committed by patrikf
%%%     * 2013-10-24: committed by patrikf
%%%     * 2013-10-25: committed by patrikf
%%%     * 2013-11-08: committed by neroburner
%%%     * 2013-11-21: committed by neroburner

% Discrete Mathematics Lecture Notes 2013-11-22

\lecturedate[\baselineskip]{2013-11-22}

Binary tree of even size has a number of internal nodes $a_n = \frac{1}{n+1} {2n \choose n}$
$A(z) = 1 + zA(z)^2$

if we look at the set of Binary trees $B$ the tree is either a leaf with size 0, or a node with two binary trees

\textbf{Examples.}

\textbf{Example 1.}
We have a bin with red, blue and yellow balls. 
We have 2 or 3 red balls, at least one blue ball, not more than one yellow ball.
We now ask for ne number of combinations with n balls, whith the given constraints. 

Assume we introduce a variable for each color, $r,b,y$. And we count by the exponent. So our function is:
\[
    1\cdot r^2 + r^3,  1+y, b + b^2 + \ldots = \frac{b}{1-b}
\]

we now have 2 configurations:
\[
    A(z) = \sum a_n z^n
    B(z) = \sum b_n z^n
    \implies \sum_{k=0}^{n} a_k b_{n-k}
\]

This leads to or formula
\[
    (r^2  z^2+ r^3 z^3) (1+zy) \left(\frac{bz}{1-bz}\right) 
    = \sum a_{lmkn} r^l b^m y^k z^n
\]

The coeffizient $a_{lmkn}$ is the number of configurations with l red, m blue, k yellow and total number equal to n balls

We are not interested in the number of blue,... balls but the total number of used balls, so we can set $r=b=y=1$ and we can simplify the formula to:
\begin{align*}
    (z^2 + z^3)&(1+z) \frac{z}{1-z} \\
    \implies \text{\# comb} 
    &= \left[z^n\right] \frac{z^3(1+z)^2}{1-z} \\
    &= \left[z^{n-3}\right] \frac{1+2z +z^2}{1-z}+ 2\left[z^{n-4}\right] \frac{1}{1-z} + \left[n^{n-5}\right] \frac{1}{1-z} \\
    &= 4
\end{align*}

\textbf{Example.} 
Number of combination w/o repetition of a set $M = \{1,2, \ldots ,N\}$. We now want to know the number of combinations of size $k = {N \choose k}$.

\[
    a_1, \ldots , a_n \mathrel{\hat{=}} \text{different balls} \mathrel{\hat{=}} \text{elemets of } M
\]

\[
    a_1^0, a_1^1 
    (1+a_1)(1+a_2)(1+a_3) \ldots (1+a_N)
\]

We now need to consider the size of the set
\[
    (1+x)(1+x)(1+x) \ldots (1+x)^N = \sum {N \choose k} x^k
\]

If we allow repetition: 
\[
    \prod _{i=1}^N (1+a_i + a_i^2 + \ldots) = \prod _{i=1}^N \frac{1}{1-a_i} \quad a_i = x
\]

\[
    f(x) = \prod _{i=1}^N \frac{1}{1-x} = \frac{1}{(1-x)^N} 
    = (1-x)^{-N} 
    = \sum _{k \geq 0} {-N \choose k} (-1)^k x^k
    = \sum _{k \geq 0} {N + k-1 \choose k} x^k
\]

\subsection{Combinatorial construction}
$\mathcal{A}$ is a combinatrial class, which is a set of objects. 
Furthermore there is a size-function $w: \mathcal{A} \rightarrow \mathbb{N}$. 

\[
a_n = \left(\text{number of objects } x\in \mathcal{A}\right) \text{ such that }w(x) = n < \infty,  \forall n \in \mathbb{N}
\]

generating function of $(\mathcal{A}, w)$ 
\[
    A(z) = \sum_{n\geq 0 } a_n z^n
\]

We now create combinatorial classes from combinatorial classes.
$(\mathcal{A}, w_A) , (\mathcal{B}, w_B)$

\begin{enumerate}[1)]
\item combinatorial sum $\mathcal{A} + \mathcal{B}$:
    we assume that $\mathcal{A} \cap \mathcal{B} = \varnothing$
    \begin{align*}
        \mathcal{A} + \mathcal{B} &= (\mathcal{A} \cup \mathcal{B} , w), \\
        w(x) &= \begin{cases}
            {w_A(x) \quad x \in \mathcal{A}}\\
            {w_B(x) \quad x \in \mathcal{B}}
			\end{cases}\\
        c_n &= a_n + b_ n\rightarrow C(z) = A(z) + B(z)
    \end{align*}
\item 
    \begin{align*}
        \mathcal{A} \times \mathcal{B} 
        &:= (\mathcal{A} \times \mathcal{B}, w) 
        \qquad \text{with } w((x,y)) = w_a(x) + w_b(y), x\in \mathcal{A}, y\in \mathcal{B}\\
        c_n &= \sum_{k=0}^n a_kb_{n-k}\\
        C(z) &= A(z)B(z)
    \end{align*}

\item
    \begin{align*}
        \seq(\mathcal{A}) &= \{ (x_1, x_2, \ldots x_k) \mid k \in \mathbb{N}_0, x_i \in \mathcal{A}\}
        \qquad k = 0 \mathrel{\hat{=}} \epsilon \ldots \text{empty sequence}\\
        &w((x_1, x_2, \ldots x_k) ) = \sum_{i=1}^{k} w_A(x_i) \\
        \mathcal{C} &= \seq(\mathcal{A} = \{\epsilon\} \cup \mathcal{A} \cup (\mathcal{A}\times\mathcal{A}) \cup \ldots )\\
        C(z) &= 1 + A(z) + A(z)^2 + \ldots = \frac{1}{1-A(z)} \\
    \end{align*}
    
    Assumtion $a_0 = 0$
\end{enumerate}

\textbf{Example.}
Integer paritions:

Decomposition of an integer into a sum of smaller integers ($5 = 3+1+1= 1+3+1 = 2+2+1 = 1+1+1+1+1$). The order does NOT matter ($5= 4+1 = 3 + 2 = 3+1+1 = 2+2+1 = 2*1+1+1 = 1+1+1+1+1$). 

If the order matters, then we speak of \dt{compositions} of an integer

\begin{align*}
    \mathcal{C} &\ldots \text{compositions of an integer }\in \mathbb{N}^{+} \\
    \mathcal{C} &= \seq(\mathcal{A}) \\
     \mathcal{A} &= \mathbb{N}^{+}, w_A(x) = x\\
	\underline{x} &= (x_1, x_2, \ldots x_k) \in \mathcal{C}\\
    \underline{x} &\mathrel{\hat{=}} x_1 + x_2 + \cdots + x_k\\
    w(\underline{x}) &= x_1 + x_2 + \ldots x_k\\
    \mathcal{A}&=\seq( \{ 0 \})\setminus \{\epsilon\}) \\
    A(z) &= \frac{1}{1-z} - 1 = \frac{z}{1-z} \\
    C(z) &= \frac{1}{1-A(z)} = \frac{1}{1-\frac{z}{1-z} }
         = \frac{1-z}{1-2z} 
         = 1 + \sum_{n\geq 1} 2^{n-1} z^n \\
    P(z) &= \prod_{i\geq 1} \frac{1}{1-x^i}\\
	\mathcal{P} &= \seq(\{1\}) \times \seq(\{2\}) \times \cdots \\
\end{align*}	 

\textbf{Example.}
Strings composed of $\cdot, --$. 
$\cdot$ has length 1 and $--$ has length 2.
We want to compute the number of strings of length $n$
\begin{align*}
  \mathcal{A} &= \{\cdot\} && \leftrightarrow z\\
  \mathcal{V} &= \{\ -- \} \mathrel{\hat{=}} \mathcal{A} \times \mathcal{A} && \leftrightarrow z^2 
\end{align*}

\textbf{Example.}
Binary trees, as explained before
\begin{align*}
  \mathcal{B} &= \{ \Box\} + \{ \circ\} \times \mathcal{B} \times \mathcal{B}\\
  B(z) &= 1 + z \cdot B(z) \cdot B(z)
\end{align*}

\subsection{Labelled constructions}
\textbf{Example.}
permutations, $a_k = n!$

$A(z) = \sum_{n\geq 0} n! z^n$

cyclic permutations: $(p_1 p_2 \ldots p_n) \mathrel{\hat{=}} (p_3 p_4 \ldots p_n p_1 p_2)$

so the number of cyclic permutations is $(n-1)!$

With the generating function: 
\begin{align*}
    B(z) = \sum (n-1)! z^n
\end{align*}

\begin{definition}
We define a \dt{labelled structure} $\mathcal{A}$ in the following way: Each object of size $n$ is composed of $n$ atomc objects. The atoms are numbered with numbers from $1$ to $n$. 
\end{definition}
$A \leftrightarrow \text{generating function } \hat{A}(z) = \sum_{n\geq 0} a_n \frac{z^n}{n!}$

\begin{align*}
    \mathcal{C} &= \mathcal{A}+\mathcal{B}: \\
         w(x) &= \begin{cases}
                w_a(x) \quad x\in \mathcal{A}\\
                w_B(x) \quad x\in \mathcal{B}
				\end{cases}\\
    \hat{C}(z) &= \sum_{n\geq 0} (a_n+b_n) \frac{z^n}{n!}
        = \hat{A}(z) + \hat{B}(z)
\end{align*}

\begin{definition}

$\mathcal{A} * \mathcal{B}$ \dt{partitional product}\\
\begin{align*}
  \mathcal{A} * \mathcal{B} = \{ (x,y) | x \in \mathcal(A), y \in \mathcal{B}, 
    &\text{ atomas are labelled in order preserving way }\\
    &\text{ s.t. the labels are } 1,2, \dotsc , w_A(x) + w_B(y) \}
\end{align*}


\end{definition}

\begin{align*}
    c_n = \sum_{k=0}^{n} {n \choose k} a_k b_{n-k}
\end{align*}

\TODO{figure of $k$ elements $\in \mathcal{A}$}

\begin{align*}
    \frac{c_n}{n!} &= \sum{k=0}^{n} \frac{1}{k!(n-k)!} a_k b_{n-k}\\
    &= \sum{k=0}^{n} \frac{a_k}{k!} \frac{b_{n-k}}{(n-k)!} \\
    &[z^n] \hat{A}(z)\hat{B}(z) 
        \quad [z^k] \hat{A}(z) 
        \quad [z^{n-k}] \hat{B}(z) \\
    &\implies \hat{C}(z) = \hat{A}(z) \hat{B}(z) \\
\end{align*}

\begin{align*}
    \seq(\mathcal{A}) &= \{\epsilon\} \times \mathcal{A} \times \mathcal{A}*\mathcal{A} \times \ldots \\
    \hat{C}(z) &= \frac{1}{1-\hat{A}(z)} \\
    \set(\mathcal{A}) &\mathrel{"\cong"} \{\varnothing\} 
        \times \mathcal{A} 
        \times \frac{1}{2}\mathcal{A} * \mathcal{A} + \frac{1}{3!}\mathcal{A}*\mathcal{A}*\mathcal{A} \\
        \implies \hat{C}(z) &= e^{\hat{A}(z)}
\end{align*}

sideremark: in the unlabelled case: 
\begin{align*}
    \set(\mathcal{A}): C(z) = \exp{A(z) - \frac{A(z^2)}{2} + \frac{A(z^3)}{3} + \ldots }
\end{align*}

cycle of $\mathcal{A}$
\begin{align*}
    \cyc(\mathcal{A}) &\cong \mathcal{A} + \frac{1}{2}\mathcal{A} * A + \frac{1}{3}\mathcal{A}*\mathcal{A} + \mathcal{A} + \mathcal{A} + \ldots \frac{1}{k}\mathcal{A}^k \\
    \hat{C}(z) &= \log\frac{1}{1-\hat{A}(z)}
\end{align*}

\textbf{Example.}
Permutations. 
\begin{align*}
    \mathcal{P} &= \text{set}(\text{cyc}(\{ \circ \} )) \\
    \hat{p}(z) &= e^{log \frac{1}{1-z}} = \frac{1}{1-z} \\
        &= \sum_{n\geq 0} n! * \frac{z^n}{n!}
\end{align*}



